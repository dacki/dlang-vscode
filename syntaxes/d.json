{
    "scopeName": "source.d",
    "fileTypes": [
        "d"
    ],
    "patterns": [
        {
            "name": "comment.line.number-sign.shebang.d",
            "match": "\\A#!.+"
        },
        {
            "name": "comment.line.double-slash.d",
            "match": "//.*"
        },
        {
            "name": "comment.block.d",
            "begin": "/\\*",
            "end": "\\*/"
        },
        {
            "include": "text.html.javadoc"
        },
        {
            "include": "#comment-block-nested"
        },
        {
            "name": "meta.section.module.d",
            "match": "(?:^|;)\\s*(module)\\s*([\\w.]+)",
            "captures": {
                "1": {
                    "name": "storage.type.d"
                },
                "2": {
                    "name": "entity.name.section.module.d"
                }
            }
        },
        {
            "name": "string.quoted.single.d",
            "match": "'(?:[^\\\\]|(?:\\\\.{1,10}))'",
            "captures": {
                "0": {
                    "patterns": [
                        {
                            "include": "#string-escaped-char"
                        }
                    ]
                }
            }
        },
        {
            "name": "string.quoted.double.d",
            "begin": "\"",
            "end": "\"(c|d|w)?",
            "patterns": [
                {
                    "include": "#string-escaped-char"
                }
            ]
        },
        {
            "name": "string.quoted.double.delimited.d",
            "begin": "q\"(\\w+)$",
            "end": "^\\1\""
        },
        {
            "name": "string.quoted.double.delimited.d",
            "begin": "q\"(?:\\[|\\(|<|\\{|(\\S))",
            "end": "(?:\\]|\\)|>|\\}|\\1)\""
        },
        {
            "name": "string.quoted.double.hexadecimal.d",
            "begin": "x\"",
            "end": "\"(c|d|w)?",
            "patterns": [
                {
                    "name": "invalid.illegal.non-hex-char.d",
                    "match": "[^\\s\\da-fA-F]"
                }
            ]
        },
        {
            "name": "string.quoted.double.raw.d",
            "begin": "r\"",
            "end": "\"(c|d|w)?"
        },
        {
            "name": "string.quoted.other.backtick.raw.d",
            "begin": "`",
            "end": "`(c|d|w)?"
        },
        {
            "name": "string.unquoted.delimited.d",
            "begin": "q{",
            "end": "}",
            "patterns": [
                {
                    "include": "$self"
                }
            ]
        },
        {
            "name": "constant.language.d",
            "match": "\\b__((FILE|FILE_FULL_PATH|MODULE|LINE|FUNCTION|PRETTY_FUNCTION)__|parameters)\\b"
        },
        {
            "name": "constant.language.boolean.d",
            "match": "\\b(true|false)\\b"
        },
        {
            "name": "constant.language.null.d",
            "match": "\\bnull\\b"
        },
        {
            "name": "constant.numeric.float.decimal.d",
            "match": "\\b\\d[\\d_]*\\.\\d[\\d_]*([eE][+-]?\\d[\\d_]*)?[fFL]?i?\\b"
        },
        {
            "name": "constant.numeric.float.hexadecimal.d",
            "match": "\\b0[xX][\\da-fA-F_]+\\.[\\da-fA-F_]+([pP][+-]?\\d[\\d_]*)?i?\\b"
        },
        {
            "name": "constant.numeric.integer.decimal.d",
            "match": "\\b\\d[\\d_]*([eE][+-]?\\d[\\d_]*)?(L?[uU]?|[uU]L)?i?\\b"
        },
        {
            "name": "constant.numeric.integer.hexadecimal.d",
            "match": "\\b0[xX][\\da-fA-F_]+([pP][+-]?\\d[\\d_]*)?i?\\b"
        },
        {
            "name": "constant.numeric.integer.binary.d",
            "match": "\\b0[bB][01_]+i?\\b"
        },
        {
            "name": "keyword.control.d",
            "match": "\\b(asm|assert|body|cast|debug|import|invariant|return|synchronized|with)\\b"
        },
        {
            "name": "keyword.control.branch.d",
            "match": "\\b(break|case|continue|default|else|goto|if|switch|version)\\b"
        },
        {
            "name": "keyword.control.exception.d",
            "match": "\\b(catch|finally|throw|try)\\b"
        },
        {
            "name": "keyword.control.loop.d",
            "match": "\\b(do|for|foreach(_reverse)?|while)\\b"
        },
        {
            "name": "keyword.operator.arithmetic.d",
            "match": "(\\+|-|\\*|/|~|\\^|\\^\\^)=?"
        },
        {
            "name": "keyword.operator.comparison.d",
            "match": "==|!=|(<|>)=?|<>"
        },
        {
            "name": "keyword.operator.logical.d",
            "match": "!|\\|\\||&&"
        },
        {
            "name": "keyword.operator.memory.d",
            "match": "\\b(delete|new)\\b"
        },
        {
            "name": "keyword.operator.variadic.d",
            "match": "\\.\\.\\."
        },
        {
            "name": "keyword.operator.slice.d",
            "match": "\\.\\."
        },
        {
            "name": "keyword.other.d",
            "match": "\\b(deprecated|is|macro|mixin|pragma|typeid|typeof|unittest|__traits)\\b"
        },
        {
            "name": "storage.modifier.d",
            "match": "\\b(abstract|alias|align|auto|const|extern|final|immutable|in|inout|lazy|nothrow|out|override|pure|ref|scope|shared|static|typedef|volatile|__gshared)\\b"
        },
        {
            "name": "storage.modifier.visibility.d",
            "match": "\\b(export|package|private|protcted|public)\\b"
        },
        {
            "name": "storage.type.d",
            "match": "\\b(bool|class|delegate|enum|function|interface|struct|template|union|void|__vector)\\b"
        },
        {
            "name": "storage.type.character.d",
            "match": "\\b(char|dchar|wchar)\\b"
        },
        {
            "name": "storage.type.integer.d",
            "match": "\\b(byte|cent|int|long|short|ubyte|ucent|uint|ulong|ushort)\\b"
        },
        {
            "name": "storage.type.float.d",
            "match": "\\b(cdouble|cfloat|creal|double|float|idouble|ifloat|ireal|real)\\b"
        },
        {
            "name": "variable.language.d",
            "match": "\\b(super|this)\\b"
        },
        {
            "name": "support.type.string.d",
            "match": "\\b(dstring|string|wstring)\\b"
        }
    ],
    "repository": {
        "string-escaped-char": {
            "patterns": [
                {
                    "name": "constant.character.escape.d",
                    "match": "\\\\(['\"?\\\\0abnfrtv]|x[\\da-fA-F]{2}|[0-3]?[0-7]{1,2}|u[\\da-fA-F]{4}|U[\\da-fA-F]{8}|&[a-zA-Z]{1,8};)"
                }
            ]
        },
        "comment-block-nested": {
            "patterns": [
                {
                    "name": "comment.block.nested.d",
                    "begin": "/\\+",
                    "end": "\\+/",
                    "patterns": [
                        {
                            "include": "#comment-block-nested"
                        }
                    ]
                }
            ]
        }
    }
}